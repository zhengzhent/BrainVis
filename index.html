<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>多通道实时监控</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            background-color: #0a0a2a;
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            color: white;
            text-align: center;
            font-size: 1.2em;
        }
        .charts-wrapper {
            display: flex;
            flex-direction: column;
            gap: 2px;
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
            padding: 10px;
        }
        .chart-container {
            position: relative;
            height: 15vh;
            width: 100%;
            background-color: rgba(0, 0, 0, 0.2);
        }
        .channel-label {
            position: absolute;
            left: 10px;
            top: 5px;
            color: white;
            font-size: 0.8em;
            z-index: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>多通道实时监控 (5 通道, 1000 Hz)</h1>
        <div class="charts-wrapper">
            <div class="chart-container">
                <div class="channel-label">Ch 1</div>
                <canvas id="chart1"></canvas>
            </div>
            <div class="chart-container">
                <div class="channel-label">Ch 2</div>
                <canvas id="chart2"></canvas>
            </div>
            <div class="chart-container">
                <div class="channel-label">Ch 3</div>
                <canvas id="chart3"></canvas>
            </div>
            <div class="chart-container">
                <div class="channel-label">Ch 4</div>
                <canvas id="chart4"></canvas>
            </div>
            <div class="chart-container">
                <div class="channel-label">Ch 5</div>
                <canvas id="chart5"></canvas>
            </div>
        </div>
    </div>

    <script>
        // 生成模拟数据
        function generateData(frequency, amplitude, phase, points) {
            const data = [];
            for (let i = 0; i < points; i++) {
                const x = i / points * Math.PI * 2;
                data.push(Math.sin(x * frequency + phase) * amplitude);
            }
            return data;
        }

        // 创建图表配置
        function createChartConfig(channelIndex) {
            const colors = ['#00ffff', '#4169e1', '#ff69b4', '#9370db', '#32cd32'];
            const frequencies = [8, 2, 4, 12, 1.5];
            
            return {
                type: 'line',
                data: {
                    labels: Array.from({length: 100}, (_, i) => i),
                    datasets: [{
                        data: generateData(frequencies[channelIndex], 1, 0, 100),
                        borderColor: colors[channelIndex],
                        borderWidth: 2,
                        fill: false,
                        tension: 0.4,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 0
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                display: channelIndex === 4, // 只在最后一个图表显示x轴刻度
                                color: 'rgba(255, 255, 255, 0.5)'
                            }
                        },
                        y: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.5)'
                            },
                            min: -1.5,
                            max: 1.5
                        }
                    }
                }
            };
        }

        // 创建所有图表
        const charts = [];
        for (let i = 0; i < 5; i++) {
            const ctx = document.getElementById(`chart${i+1}`).getContext('2d');
            charts.push(new Chart(ctx, createChartConfig(i)));
        }

        // 实时更新数据
        setInterval(() => {
            const frequencies = [8, 2, 4, 12, 1.5];
            charts.forEach((chart, index) => {
                const frequency = frequencies[index];
                const currentData = chart.data.datasets[0].data;
                chart.data.datasets[0].data = generateData(
                    frequency, 
                    currentData[0] < 0 ? 1 : 0.8, 
                    Math.random() * Math.PI, 
                    100
                );
                chart.update();
            });
        }, 150);
    </script>
</body>
</html>
